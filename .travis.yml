sudo: required

language: node_js

node_js:
  - "stable" # v14

branches:
  only:
    - master

before_install:
  - "cd server && cd node_server && npm i --silent"

script:
  - "npm run test"

after_success:
  - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
  - chmod +x send.sh
  - ./send.sh success $WEBHOOK_URL
after_failure:
  - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
  - chmod +x send.sh
  - ./send.sh failure $WEBHOOK_URL
